{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/employee.service\";\nimport * as i2 from \"src/app/service/user-auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nexport class LoginComponent {\n  constructor(employeeService, userAuthService, router) {\n    this.employeeService = employeeService;\n    this.userAuthService = userAuthService;\n    this.router = router;\n  }\n  ngOnInit() {}\n  login(loginForm) {\n    this.employeeService.login(loginForm.value).subscribe(response => {\n      this.userAuthService.setToken(response.tokenType);\n      this.userAuthService.setRoles(response.user.roles);\n      const roles = response.user.roles[0];\n      const role = roles.name;\n      if (roles === 'ROLE_ADMIN') {\n        this.router.navigate(['/employee']);\n      } else {\n        this.router.navigate(['/user']);\n      }\n    }, error => {\n      console.log(error);\n    });\n  }\n  static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.EmployeeService), i0.ɵɵdirectiveInject(i2.UserAuthService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 7,\n    vars: 0,\n    consts: [[1, \"container\", \"mt-5\"], [1, \"card\", 2, \"padding\", \"20px\"], [3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [\"type\", \"text\", \"ngModel\", \"\", \"name\", \"usernameOrEmail\", \"id\", \"usernameOrEmail\", \"placeholder\", \"Enter your username\", 1, \"form-control\", \"mb-3\"], [\"type\", \"password\", \"ngModel\", \"\", \"name\", \"password\", \"id\", \"password\", \"placeholder\", \"Enter your password\", 1, \"form-control\", \"mb-3\"], [\"type\", \"submit\", \"value\", \"Login\", 1, \"btn\", \"btn-outline-primary\", \"form-control\", \"rounded-0\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\", 2, 3);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_2_listener() {\n          i0.ɵɵrestoreView(_r1);\n          const _r0 = i0.ɵɵreference(3);\n          return i0.ɵɵresetView(ctx.login(_r0));\n        });\n        i0.ɵɵelement(4, \"input\", 4)(5, \"input\", 5)(6, \"input\", 6);\n        i0.ɵɵelementEnd()()();\n      }\n    },\n    dependencies: [i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["LoginComponent","constructor","employeeService","userAuthService","router","ngOnInit","login","loginForm","value","subscribe","response","setToken","tokenType","setRoles","user","roles","role","name","navigate","error","console","log","_","i0","ɵɵdirectiveInject","i1","EmployeeService","i2","UserAuthService","i3","Router","_2","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","LoginComponent_Template_form_ngSubmit_2_listener","ɵɵrestoreView","_r1","_r0","ɵɵreference","ɵɵresetView","ɵɵelement","ɵɵelementEnd"],"sources":["C:\\IntelijIDEA Projfile\\employee_management\\src\\app\\components\\login\\login.component.ts","C:\\IntelijIDEA Projfile\\employee_management\\src\\app\\components\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { EmployeeService } from 'src/app/service/employee.service';\nimport { UserAuthService } from 'src/app/service/user-auth.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit{\nconstructor(private employeeService:EmployeeService, \n  private userAuthService:UserAuthService,\n  private router:Router){\n\n}\nngOnInit(): void {\n    \n}\nlogin(loginForm: NgForm) {\n this.employeeService.login(loginForm.value).subscribe(\n  (response:any) => {\n    this.userAuthService.setToken(response.tokenType);\n    this.userAuthService.setRoles(response.user.roles);\n\n    const roles = response.user.roles[0];\n    const role = roles.name;\n    if(roles === 'ROLE_ADMIN'){\n      this.router.navigate(['/employee'])\n    }else{\n      this.router.navigate(['/user'])\n    }\n  },\n  (error) => {\n    console.log(error);\n  }\n );\n}\n}\n","<div class=\"container mt-5\">\n    <div class=\"card\" style=\"padding: 20px;\">\n        <form #loginForm=\"ngForm\" (ngSubmit)=\"login(loginForm)\">\n            <input type=\"text\"\n            ngModel\n            name=\"usernameOrEmail\"\n            id=\"usernameOrEmail\"\n            placeholder=\"Enter your username\"\n            class=\"form-control mb-3\"\n            >\n\n            <input type=\"password\"\n            ngModel\n            name=\"password\"\n            id=\"password\"\n            placeholder=\"Enter your password\"\n            class=\"form-control mb-3\"\n            >\n\n            <input type=\"submit\"\n            value=\"Login\"\n            class=\"btn btn-outline-primary form-control rounded-0\">\n        </form>\n    </div>\n</div>"],"mappings":";;;;;AAWA,OAAM,MAAOA,cAAc;EAC3BC,YAAoBC,eAA+B,EACzCC,eAA+B,EAC/BC,MAAa;IAFH,KAAAF,eAAe,GAAfA,eAAe;IACzB,KAAAC,eAAe,GAAfA,eAAe;IACf,KAAAC,MAAM,GAANA,MAAM;EAEhB;EACAC,QAAQA,CAAA,GAER;EACAC,KAAKA,CAACC,SAAiB;IACtB,IAAI,CAACL,eAAe,CAACI,KAAK,CAACC,SAAS,CAACC,KAAK,CAAC,CAACC,SAAS,CACnDC,QAAY,IAAI;MACf,IAAI,CAACP,eAAe,CAACQ,QAAQ,CAACD,QAAQ,CAACE,SAAS,CAAC;MACjD,IAAI,CAACT,eAAe,CAACU,QAAQ,CAACH,QAAQ,CAACI,IAAI,CAACC,KAAK,CAAC;MAElD,MAAMA,KAAK,GAAGL,QAAQ,CAACI,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC;MACpC,MAAMC,IAAI,GAAGD,KAAK,CAACE,IAAI;MACvB,IAAGF,KAAK,KAAK,YAAY,EAAC;QACxB,IAAI,CAACX,MAAM,CAACc,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;OACpC,MAAI;QACH,IAAI,CAACd,MAAM,CAACc,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;;IAEnC,CAAC,EACAC,KAAK,IAAI;MACRC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB,CAAC,CACD;EACF;EAAC,QAAAG,CAAA,G;qBA3BYtB,cAAc,EAAAuB,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,eAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,eAAA,GAAAL,EAAA,CAAAC,iBAAA,CAAAK,EAAA,CAAAC,MAAA;EAAA;EAAA,QAAAC,EAAA,G;UAAd/B,cAAc;IAAAgC,SAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,wBAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;;QCX3Bf,EAAA,CAAAiB,cAAA,aAA4B;QAEMjB,EAAA,CAAAkB,UAAA,sBAAAC,iDAAA;UAAAnB,EAAA,CAAAoB,aAAA,CAAAC,GAAA;UAAA,MAAAC,GAAA,GAAAtB,EAAA,CAAAuB,WAAA;UAAA,OAAYvB,EAAA,CAAAwB,WAAA,CAAAR,GAAA,CAAAjC,KAAA,CAAAuC,GAAA,CAAgB;QAAA,EAAC;QACnDtB,EAAA,CAAAyB,SAAA,eAMC;QAaLzB,EAAA,CAAA0B,YAAA,EAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}