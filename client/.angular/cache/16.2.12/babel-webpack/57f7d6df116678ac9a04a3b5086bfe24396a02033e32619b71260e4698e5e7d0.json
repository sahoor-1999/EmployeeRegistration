{"ast":null,"code":"import { catchError, throwError } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/user-auth.service\";\nimport * as i2 from \"@angular/router\";\nexport class AuthInterseptor {\n  constructor(userAuthService, router) {\n    this.userAuthService = userAuthService;\n    this.router = router;\n  }\n  intercept(req, next) {\n    const token = this.userAuthService.getToken();\n    req = this.addToken(req, token);\n    return next.handle(req).pipe(catchError(err => {\n      console.log(err.status);\n      if (err.status === 401) {\n        this.router.navigate(['/login']);\n      } else if (err.status === 403) {\n        this.router.navigate(['/forbidden']);\n      }\n      return throwError(\"Something is wrong\");\n    }));\n  }\n  addToken(request, token) {\n    return request.clone();\n    {\n      setHeaders: {\n        Authorization: `Bearer ${token}`;\n      }\n    }\n  }\n  static #_ = this.ɵfac = function AuthInterseptor_Factory(t) {\n    return new (t || AuthInterseptor)(i0.ɵɵinject(i1.UserAuthService), i0.ɵɵinject(i2.Router));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AuthInterseptor,\n    factory: AuthInterseptor.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["catchError","throwError","AuthInterseptor","constructor","userAuthService","router","intercept","req","next","token","getToken","addToken","handle","pipe","err","console","log","status","navigate","request","clone","setHeaders","Authorization","_","i0","ɵɵinject","i1","UserAuthService","i2","Router","_2","factory","ɵfac","providedIn"],"sources":["C:\\IntelijIDEA Projfile\\employee_management\\src\\app\\components\\_auth\\auth.interseptor.ts"],"sourcesContent":["import { HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from \"@angular/common/http\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { Router } from \"@angular/router\";\r\nimport { Observable, catchError, throwError } from \"rxjs\";\r\nimport { UserAuthService } from \"src/app/service/user-auth.service\";\r\n\r\n@Injectable({\r\n    providedIn:'root'\r\n})\r\n\r\nexport class AuthInterseptor implements HttpInterceptor {\r\n    constructor(private userAuthService: UserAuthService, private router: Router) { }\r\n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n        const token: any = this.userAuthService.getToken();\r\n        req = this.addToken(req, token);\r\n        return next.handle(req).pipe(\r\n            catchError(\r\n                (err:HttpErrorResponse) => {\r\n                    console.log(err.status);\r\n                    if (err.status === 401) {\r\n                        this.router.navigate(['/login']);\r\n                    }else if(err.status === 403){\r\n                        this.router.navigate(['/forbidden'])\r\n                    }\r\n                    return throwError(\"Something is wrong\");\r\n                }\r\n            )\r\n        );\r\n    }\r\n\r\n    private addToken(request: HttpRequest<any>, token: string) {\r\n        return request.clone()\r\n        {\r\n            setHeaders:{\r\n                Authorization:`Bearer ${token}` \r\n            }\r\n        }\r\n    }\r\n}"],"mappings":"AAGA,SAAqBA,UAAU,EAAEC,UAAU,QAAQ,MAAM;;;;AAOzD,OAAM,MAAOC,eAAe;EACxBC,YAAoBC,eAAgC,EAAUC,MAAc;IAAxD,KAAAD,eAAe,GAAfA,eAAe;IAA2B,KAAAC,MAAM,GAANA,MAAM;EAAY;EAChFC,SAASA,CAACC,GAAqB,EAAEC,IAAiB;IAC9C,MAAMC,KAAK,GAAQ,IAAI,CAACL,eAAe,CAACM,QAAQ,EAAE;IAClDH,GAAG,GAAG,IAAI,CAACI,QAAQ,CAACJ,GAAG,EAAEE,KAAK,CAAC;IAC/B,OAAOD,IAAI,CAACI,MAAM,CAACL,GAAG,CAAC,CAACM,IAAI,CACxBb,UAAU,CACLc,GAAqB,IAAI;MACtBC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,MAAM,CAAC;MACvB,IAAIH,GAAG,CAACG,MAAM,KAAK,GAAG,EAAE;QACpB,IAAI,CAACZ,MAAM,CAACa,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;OACnC,MAAK,IAAGJ,GAAG,CAACG,MAAM,KAAK,GAAG,EAAC;QACxB,IAAI,CAACZ,MAAM,CAACa,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC;;MAExC,OAAOjB,UAAU,CAAC,oBAAoB,CAAC;IAC3C,CAAC,CACJ,CACJ;EACL;EAEQU,QAAQA,CAACQ,OAAyB,EAAEV,KAAa;IACrD,OAAOU,OAAO,CAACC,KAAK,EAAE;IACtB;MACIC,UAAU,EAAC;QACPC,aAAa,EAAC,UAAUb,KAAK,EAAE;;;EAG3C;EAAC,QAAAc,CAAA,G;qBA3BQrB,eAAe,EAAAsB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,eAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,MAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAf5B,eAAe;IAAA6B,OAAA,EAAf7B,eAAe,CAAA8B,IAAA;IAAAC,UAAA,EAHb;EAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}